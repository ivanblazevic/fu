<html>
  <head>
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"
      integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="lib/codemirror.css" />

    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.9.0/beautify-css.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
    <script src="lib/text-diff/diff.js"></script>
    <script src="lib/codemirror.js"></script>
    <script src="mode/css/css.js"></script>
    <script src="mode/javascript/javascript.js"></script>
    <script src="mode/xml/xml.js"></script>
    <script src="mode/htmlmixed/htmlmixed.js"></script>

    <style id="element"></style>
  </head>
  <body>
    <div id="actions">
      <nav>
        <span v-show="!showField('name')"
          >{{ project.name || "Untitled"
          }}<button class="icon" @click="focusField('name')">
            <i class="fas fa-pencil-alt"></i></button
        ></span>
        <input
          v-show="showField('name')"
          ref="name"
          @blur="onBlur"
          id="project-name"
          type="text"
          class="no-styling-input"
          v-model="project.name"
        />

        <div style="float: right;line-height: 30px;">
          <button class="primary" onclick="save()">
            <i style="margin-right: 6px" class="fas fa-save"></i>Save
          </button>
        </div>
      </nav>

      <div class="container">
        <div class="side" style="border-right: 1px solid gray;">
          <h3>
            HTML
            <button
              style="float: right"
              class="primary"
              onclick="editElement()"
            >
              <i v-show="isEditElement" class="fas fa-eye"></i>
              <i v-show="!isEditElement" class="fas fa-code"></i>
            </button>
          </h3>

          <div class="box">
            <div v-show="!isEditElement" id="ee" class="element-p2333"></div>

            <div v-bind:style="{ opacity: isEditElement ? 1 : 0 }">
              <textarea id="code" name="code"></textarea>
            </div>
          </div>
        </div>

        <div class="side">
          <h3>
            CSS
            <div style="float: right">
              <button
                class="primary"
                v-if="isEdit && currentIndex === project.steps.length -1"
                onclick="addStep()"
              >
                Add Step
              </button>
              <button class="primary" onclick="edit()">
                <i v-show="isEdit" class="fas fa-eye"></i>
                <i v-show="!isEdit" class="fas fa-code"></i>
              </button>
            </div>
          </h3>

          <div class="box">
            <div v-show="!isEdit">
              <pre class="css"><code id="text" class="css">...</code></pre>
            </div>

            <div v-bind:style="{ opacity: isEdit ? 1 : 0 }">
              <textarea id="code_css" name="code_css"></textarea>
            </div>
          </div>
        </div>
      </div>

      <footer>

          <button class="primary step" onclick="previous()">
            <i style="margin-left: 6px" class="fas fa-backward"></i>
          </button>

          <div>
            <div style="">
              <div class="step-point" v-for="(item, index) in project.steps">
                <div class="step-inner-point" v-bind:class="{ active: index === currentIndex }"></div>
              </div>
            </div>

            <h3 v-show="!isEdit && step" id="title" @click="showModal = true">
              {{ step && step.title }}
            </h3>
          </div>

          <button class="primary step" onclick="next()">
            <i style="margin-left: 6px" class="fas fa-forward"></i>
          </button>

      </footer>

      <div class="overlay" v-bind:class="{ show: showModal }">
        <div class="modal" v-click-outside="cancelModal">
          <h3 style="margin-top: 0">Step Description</h3>
          <textarea name="" id="" cols="30" rows="10" v-model="project.steps && project.steps[currentIndex].title">vka</textarea>
          <button @click="showModal = false" type="button">Cancel</button>
          <button @click="saveStep()" type="button">Save</button>
        </div>
      </div>

    </div>

    <script src="app.js"></script>
  </body>
</html>
